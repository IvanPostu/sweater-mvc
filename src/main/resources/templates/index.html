
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/mainLayout :: layout(~{::title}, ~{::section})}"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">



<title>Home - Index</title>


<section>


    <form method="post" enctype="multipart/form-data">
        <input type="text" name="text" placeholder="Введите сообщение" value="">
        <input type="text" name="tag" placeholder="Тэг" value="">
        <input type="file" name="file" >
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button type="submit">Добавить</button>
    </form>

    <form action="filter" method="post">
        <input type="text" name="filter">
        <button type="submit">Найти</button>
    </form>

    <div>Список сообщений:</div>
    <div th:if= "${messages != null}" th:each="message : ${messages}">
        <b th:text="${message.id}"></b>
        <span th:text="${message.text}"></span>
        <i th:text="${message.tag}"></i>
        <strong th:text="${message.getAuthorName()}"></strong>
        <div th:if="${message.filename != null}">
            <img th:src="'/img/' + ${message.filename}" >
        </div>
    </div>

</section>



</html>