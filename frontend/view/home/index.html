<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/mainLayout/index :: layout(~{::title}, ~{::section})}">



<title>Home - Index</title>


<section id="app">
  {{message}}


  <div class="form-row">
    <div class="form-group col-md-6">
      <form method="get" action="/home" class="form-inline">
        <input type="text" name="filter" class="form-control" th:value="${filter}" placeholder="Поиск по тегу">
        <button type="submit" class="btn btn-primary ml-2">Search</button>
      </form>
    </div>
  </div>

  <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false"
    aria-controls="collapseExample">
    Add new Message
  </a>
  <div class="collapse" id="collapseExample">
    <div class="form-group mt-3">
      <form method="post" action="/home" enctype="multipart/form-data">
        <div class="form-group">
          <input type="text" class="form-control" name="text" placeholder="Введите сообщение" />
        </div>
        <div class="form-group">
          <input type="text" class="form-control" name="tag" placeholder="Тэг">
        </div>
        <div class="form-group">
          <div class="custom-file">
            <input type="file" name="file" id="customFile">
            <label class="custom-file-label" for="customFile">Choose file</label>
          </div>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <div class="form-group">
          <button type="submit" class="btn btn-primary">Добавить</button>
        </div>
      </form>
    </div>
  </div>


  <div class="card-columns">
    <div ref="messageCards" class="card my-3" th:if="${messages != null}" th:each="message : ${messages}">
      <div th:if="${message.filename != null}">
        <img @error="imgOnErrorHandle" th:src="'/img/' + ${message.filename}" class="card-img-top">
      </div>
      <div class="m-2">
        <span th:text="${message.text}"></span>
        <i th:text="${message.tag}"></i>
      </div>
      <div th:text="${message.getAuthorName()}" class="card-footer text-muted">
      </div>
    </div>
  </div>




</section>



</html>